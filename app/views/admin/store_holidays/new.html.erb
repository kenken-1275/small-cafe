<div class="reserve">
  <div class="reserve-center">
    <div class="reserve-title">管理　店休日設定</div>

    <div class="parent-simple-calendar">
      <%= week_calendar(attribute: :reservation_date, events: @reservations) do |date, reservations| %>
        <div class="calendar-date">
          <%= date.strftime('%-m月%d日') %>
        </div>
        <% reservations.each do |reservation| %>
          <div>
            <%= reservation.reservation_time.strftime('%H:%M') %><span>　<%= reservation.people_number %>人</span>
          </div>
        <% end %>
      <% end %>
    </div>

    <div class="new-reserve-form">
      <%= form_with(model:@store_holiday,url:admin_store_holidays_path,method: :post,local: true) do |f| %>
        <%= render 'shared/error_messages', model: f.object %>
        <div class="reserve-form">
          <%= f.label :日付を選択：, class: 'lavel'%>
          <%= f.text_field :store_holiday, class: 'new-reserve-date',id: "flatpickr" %><br>
          <div class="reserve-new">
            <%= f.submit '店休日を設定する', class:'new-reserve-submit'%>
          </div>
        </div>
      <% end %>
    </div>
    <div class="button">
      <%= link_to 'トップページに戻る',root_path,class:'back_button'%>
    </div>
  </div>
</div>
<script>
    flatpickr("#flatpickr", {
      locale:"ja",
      disable:[
        function(date) {
          return (date.getDay() === 1 || date.getDay() === 2 || date.getDay() ===3);
        }
      ],
      minDate:"today",
      maxDate: new Date().fp_incr(30)
    });
</script>